<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <title>Hand-Writing EPUBs / Guides</title>
    <link rel="icon" type="image/x-icon" href="images/site/webicon.webp">
    <!-- <meta http-equiv="content-security-policy" content="default-src 'self' https://;"> -->
    <meta charset="utf-8">
    <meta name="description" content="Privacy policy and cookies information">
    <meta name="keywords" content="Guide, Tech, Privacy, Cookies">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div id="overbox" class="flexobject">
        <!-- left-side -->
        <header id="leftside" class="flexobject" role="banner">
            <nav id="navscontainer" class="flexobject" role="navigation">
                <!-- icon ontop of navsbar -->
                <a id="navsheader" href="index.html" role="button">
                    <img id="homelink" src="images/site/webicontranswebp.webp" alt="Logo">
                </a>
                <!-- main left-side navsbar -->
                <div id="leftsidenavsbox" class="bubblebox4navs flexobject">
                    <a class="navslink flexobject" style="padding-top:0.25rem;" href="index.html" role="button">
                        <img class="svgblk" src="images/site/home_black_24dp.svg" alt="Home icon">
                        <img class="svgwht" src="images/site/home_white_24dp.svg" alt="Home icon">
                        <span class="navslabel">Home</span>
                    </a>
                    <hr class="navs">
                    <a class="navslink flexobject" href="index.html#siteindex" role="button">
                        <img class="svgblk" src="images/site/list_black_24dp.svg" alt="Index icon">
                        <img class="svgwht" src="images/site/list_white_24dp.svg" alt="Index icon">
                        <span class="navslabel">Index</span>
                    </a>
                    <hr class="navs">
                    <a class="navslink flexobject" href="comms.html" role="button">
                        <img id="mmostsvg" class="svgblk" src="images/site/mattermostblack.svg" alt="Comms icon">
                        <img id="mmostsvg" class="svgwht" src="images/site/mattermostwhite.svg" alt="Comms icon">
                        <span class="navslabel">Comms</span>
                    </a>
                    <hr class="navs">
                    <a class="navslink flexobject" style="padding-bottom:0.25rem;" href="wiki.html" role="button">
                        <img class="svgblk" src="images/site/menu_book_black_24dp.svg" alt="Wiki icon">
                        <img class="svgwht" src="images/site/menu_book_white_24dp.svg" alt="Wiki icon">
                        <span class="navslabel">Wiki</span>
                    </a>
                </div>
            </nav>            
        </header>

        <!-- right-side -->
        <div id="rightside" class="flexobject">
            <div id="center" class="flexobject">
                <!-- site heading -->
                <div id="titlebox" class="flexobject">
                    <!-- header image on mobile -->
                    <a class="mobheader homelink" href="index.html" role="button">
                        <img id="homelink" src="images/site/webicontranswebp.webp" alt="Logo">
                    </a>
                    <h1 role="heading">EPUBs / Guides</h1>
                </div>
                <!-- right-side location bar, navs on mobile -->
                <nav id="bubblebox4locbar" class="flexobject" role="navigation">
                    <!-- location on desktop-->
                    <a class="loclinks" href="index.html" role="link">Home /</a>
                    <a class="loclinks" href="practices.html" role="link">Practices /</a>
                    <a class="loclinks" href="hand-writing-epubs.html" role="link">Hand-Writing EPUBs</a>
                    <!-- navs on mobile -->
                    <a class="moblink navslink flexobject" href="index.html" role="button">
                        <img class="svgblk" src="images/site/home_black_24dp.svg" alt="Home icon">
                        <img class="svgwht" src="images/site/home_white_24dp.svg" alt="Home icon">
                        <span class="navslabel">Home</span>
                    </a>
                    <a class="moblink navslink flexobject" href="index.html#siteindex" role="button">
                        <img class="svgblk" src="images/site/list_black_24dp.svg" alt="Index icon">
                        <img class="svgwht" src="images/site/list_white_24dp.svg" alt="Index icon">
                        <span class="navslabel">Index</span>
                    </a>
                    <a class="moblink navslink flexobject" href="comms.html" role="button">
                        <img id="mmostsvg" class="svgblk" src="images/site/mattermostblack.svg" alt="Comms icon">
                        <img id="mmostsvg" class="svgwht" src="images/site/mattermostwhite.svg" alt="Comms icon">
                        <span class="navslabel">Comms</span>
                    </a>
                    <a class="moblink navslink flexobject" href="wiki.html" role="button">
                        <img class="svgblk" src="images/site/menu_book_black_24dp.svg" alt="Wiki icon">
                        <img class="svgwht" src="images/site/menu_book_white_24dp.svg" alt="Wiki icon">
                        <span class="navslabel">Wiki</span>
                    </a>
                </nav>

                <!-- article main -->
                <main>
                    <article class="flexobject">
                        <!-- title, author info, intro -->
                        <header class="bubblebox4content flexobject">
                            <!-- article title -->
                            <h2 id="threadsguide" class="" role="heading">Hand-Writing EPUBs</h2>
                            <!-- author, date -->
                            <span class="content">Page last updated <time datetime="2021-12-10 22:20">2021/12/10</time>, CES</span>
                            <hr>
                            <h3 id="intro" style="display: none;">Intro</h3>
                            <p>Right now, I just finished converting Activist Study (ARAK) from PDF to EPUB. It took me 3 days of constant work, copying 160 pages paragraph by paragraph and formatting them carefully to match the original.</p>
                            <p>Calibre can rip the text out of a PDF in seconds, but it doesn't do it very nicely. In the best condition, you will have to remove double-spaces, tabs at the start of paragraphs, some line-break hyphens in the middle of words, etc. but you can do this quite quickly with the find-and-replace tools in LibreOffice Writer and the Advanced Find and Replace plugin.</p>
                            <p>The EPUB generated by Calibre from the ARAK PDF was a garbage fire however. Absolutely unreadable; paragraphs spliced in between each other, page headers, footers, and page numbers sprinkled into the body text, the second half of the entire book was bolded for some reason. So using Sigil and VSCode, I had to sort through the text in the garbled EPUB and copy it into a nice, clean, new EPUB, so writing it from scratch.</p>
                            <p>This, by far, is the worst way to spend your time. It exhausted me. But I will teach you what I've learned, because it's nice to have EPUBs.</p>
                            <p><b>Also have a look at:</b></p>
                            <ul style="margin-top:0px; margin-bottom:0px;">
                                <li><a href="how-to-create-epubs.html"><cite>How to Create EPUBs</cite></a> a very useful (and pretty comprehensive) guide to using Calibre and LibreOffice to generate EPUBs. This is the best way to make EPUBs from PDFs, the way in the rest of my document is about what you need to know when that doesn't work. Arguably, read <cite>How to Create EPUBs</cite> first.</li>
                                <li><a href="epub-tools-inst.html"><cite>Installing the tools for making EPUBs</cite></a></li>
                                <li><a href="epub-making.html">R. Frobnitz, <cite>Converting PDF Books to EPUB with Calibre and LibreOffice</cite></a></li>
                            </ul>
                            <hr class="lasthr">
                        </header>
                        <section class="bubblebox4content">
                            <h3 id="epubfileformat">EPUB File Format</h3>
                            <p>EPUBs are a bundle of HTML and CSS files, media assets (images, or even audio and video files), and metadata compressed into a <code>.zip</code>.</p>
                            <p>You can see inside an <code>.epub</code> file by renaming the file extension from <code>.epub</code> to <code>.zip</code>, and then unpacking that file. Make sure you have file extensions visible, otherwise you'll have to change the file extension by right-clicking on the file, going to <code>Properties</code>, and renaming it from there.</p>
                            <p>Inside are the HTML files, CSS files, and folders for assets and some of the metadata.</p>
                            <p>There is also the <code>content.opf</code> file, which is a manifest of all the files in the EPUB as well as containing the order in which the files should be displayed, and a <code>toc.ncx</code> which is the contents page.</p>
                            <hr>
                            <h3 id="htmlcss">HTML, CSS</h3>
                            <p>EPUBs are kind of like simple little websites. HTML (hypertext markup language) and CSS (cascading style sheets) are the files that make up websites. HTML contains all text and instructions for the arrangement of things on the page, and CSS is used to style them all.</p>
                            <p>Don't be put off by HTML and CSS. They're both messy looking, but very simple to use and understand once you get the hang of it.</p>
                            <p>I can't (read: won't) go into detail about them here. Read the <a href="https://www.w3schools.com/html/default.asp">W3Schools</a> guides on both HTML and CSS if you'd like to learn how to use them. W3Schools has the best guides available for learning HTML and CSS, and also a variety of tutorials for programming languages.</p>
                            <p>All you really need to know is that when an e-Reader device opens an EPUB, it will load all the HTML files contained in the <code>.epub</code> file in the order specified in the <code>&#60;spine&#62;</code> part of the <code>content.opf</code> file. More on that later.</p>
                            <hr>
                            <h3 id="openeditepub">Opening and Editing EPUBs</h3>
                            <p>2 programs; Calibre and Sigil; though you can open HTML files in almost any text editor.</p>
                            <p>Calibre is an e-book library and reader that can generate EPUBs from PDF files.</p>
                            <p>Sigil is a proper EPUB editor. You can open EPUBs and see and edit the HTML and CSS, re-order, add and remove pages, edit metadata, and auto-generate the table of contents, indexes, and nearly all the stuff you might ever want in an EPUB. When you're editing the HTML or CSS, you can also see a preview of how the EPUB will look.</p>
                            <hr>
                            <h3 id="ereader">e-Reader</h3>
                            <p>The HTML files are usually split into the chapters or sections of the "book". One HTML file, in the <code>&#60;body&#62;</code> section, will contain all the text in the chapter organised by paragraph, its headings and subheadings, all neatly in order and easily readable by both you and machines.</p>
                            <p>When the e-Reader opens the chapter, it will display as much text as it can fit on the screen, and then breaks the page (ends it). The user turns the page and the text continues. When writing HTML documents for an EPUB, you don't specify where the page will break, because you don't know where it will break. The user can set the text size and font, line width, etc and they will all have different sized screens. It's the e-Reader that decides where the page breaks.</p>
                            <p>You decide where the chapter ends though, through making a new HTML file. When the chapter ends, the e-Reader will display blank space below the last line, just like a real book does, so that the heading for the next chapter can begin at the top of the next page.</p>
                            <p>e-Readers specify a lot of their own CSS (styling, for if you didn't learn about CSS on W3Schools, that means margin sizes, font type, colour, and size, line width, centering and justification of text, and so on) when an EPUB is read, so to avoid things breaking or looking messy, it's best to use as little CSS as possible.</p>
                            <hr>
                            <h3 id="structure">Structure</h3>
                            <p>In order to learn how the files in an EPUB were structured, I had opened the Calibre manual in Sigil and copied how it was laid out, cross-referenced with the EPUB that Calibre had generated.</p>
                            <p>In short, the HTML files were very barebones, only the <code>&#60;title&#62;</code> and a link to the stylesheet (which I actually never really needed) in the <code>&#60;head&#62;</code> section and the <code>&#60;body&#62;</code> section containing only headings, paragraphs, some spans for when I didn't want margins above and below the text as a paragraph would have, and text formatting elements.</p>
                            <p>I used XHTML files, which were what Calibre generated, so I just copied the <code>!DOCTYPE</code> and the lines around about there into new XHTML files.</p>
                            <p>XHTML is "HTML which conforms to XML standards" which, I'm not sure exactly what that means, but apparently it's better machine readability, which I guess is what you want for an e-Reader. Structurally it meant nothing except for some extra lines at the very beginning of the file.</p>
                            <hr>
                            <h3 id="workflow">Workflow</h3>
                            <p>When I was writing out ARAK, I had the garbage fire EPUB that Calibre had generated open in Sigil, and copied the text paragraph by paragraph, checking it against the PDF open in Firefox, into nice, clean, new XHTML files in Visual Studio Code.</p>
                            <p>Visual Studio Code is free and probably the easiest thing to write HTML in. I'd recommend it over Sigil for the bulk of HTML editing, because VSCode has some features like autocompletion of annoying HTML syntax and easier tabbing than Sigil.</p>
                            <p>When I finished a chapter I imported the XHTML file made by VSCode into Sigil by right-clicking on the document tree on the left hand side and hitting "add external page". Any changes made in Sigil to that file don't get updated to the original.</p>
                            <p>I could then view the EPUB every so often by saving it (Sigil saves ready-compiled EPUBs) and opening the file in Calibre. When I made changes to it in Sigil again, I had to delete the EPUB in Calibre and import the new one, because Calibre keeps all its EPUBs in its own directory, that you chose when you were installing it.</p>
                            <hr>
                            <h3 id="accessibility">Accessibility</h3>
                            <p>I don't know as much about accessibility as I really should, especially about HTML, so you may have to search for most of this information yourself.</p>
                            <p>In short, HTML encourages you to declare exactly what an element on a page is using its syntax, called tags, which you can find a complete reference to at W3Schools. The tags allow both screen readers and other machines to correctly interpret the page and its content, and making sure you format the HTML properly is important for readability and compatibility with e-Readers.</p>
                            <p>For example, there are lots of different tags that cause text to be displayed in italics, but they're all for different purposes. for example, <code>&#60;cite&#62;</code> is for the name of a work or another text, <code>&#60;em&#62;</code> is emphasis and will cause screen readers to speak with added stress, and <code>&#60;i&#62;</code> is for anything that doesn't fit into any of the other italics tags.</p>
                            <p>On the one hand, it is a trial and error process. Some e-Readers will display an EPUB exactly how you wanted, and some will garble it. Testing is the most important process for accessibility. You should make sure that the EPUB is both readable on whatever e-Readers you have to hand, and also that it works fine with screen readers.</p>
                            <hr>
                            <h3 id="creativelicense">Creative License</h3>
                            <p>An EPUB, or eBooks generally, are not just digitised books. That's what PDFs are. EPUBs fundamentally work differently, because they are written in HTML.</p>
                            <p>For example, you can't put footnotes at the bottom of the e-Reader screen on the page that they reference, like would be in a paper book or PDF. I put them instead at the end of the chapter, below a horizontal rule <code>&#60;hr/&#62;</code>.</p>
                            <p>Generally, you cannot have footers, and you cannot leave whitespace in the middle of a page without specifically declaring the size of the space in <code>px</code> or <code>em</code>/<code>rem</code>. EPUBs are extremely basic, like an ancient website.</p>
                            <p>In EPUBs you are able to hyperlink between different parts of the book. The table of contents usually always has hyperlinks by default, but you can add them anywhere with <code>&#60;a&#62;</code>, for example, to link between footnotes and their citation marks. You would give the footnote an ID, like <cite>id="footnote1"</cite>, and then have the citation mark wrapped in a link, like;</p>
                            <p><code>&#60;a href="#footnote1"&#62;&#60;sup&#62;1&#60;/sup&#62;&#60;/a&#62;</code></p>
                            <p>You can also use a lot of the features of HTML meant primarily for websites, like <code>&#60;div&#62;</code>, but they'll get broken on some e-Readers. For example, you can use <code>&#60;div&#62;</code> and CSS <code>float</code> to split a page into two columns, and this works on the Calibre e-Reader, but not on the Android e-Readers I tried.</p>
                            <hr>
                            <h3 id="epubmetadata">EPUB Metadata</h3>
                            <p>The easy part is stuff like author, ISBN, etc. Follow best practices and put in as much info as you can, Sigil makes this easy.</p>
                            <p>The more difficult part is the table of contents and the manifest. Sigil can generate these for you, and it does it very well, but the table of contents especially can look very messy, as it defaults to adding every subheading into it.</p>
                            <p>In <code>toc.ncx</code>> (or XHTML) the table of contents is listed in the <code>&#60;nav&#62;</code> section. It will either accept just links <code>&#60;a&#62;</code> to pages one after another; or it will accept one (and only one) ordered list or unordered list <code>&#60;ol&#62;</code> or <code>&#60;ul&#62;</code> with any other lists tucked inside of the primary one as a list item <code>&#60;li&#62;</code>.</p>
                            <p>An example contents page is something like this, not including the surrounding HTML that Sigil will generate for you:</p>
                            <p style="background-color: wheat; border-radius: 0.3rem; padding:0rem 0.1rem 0rem 0.1rem;"><code>&#60;nav&#62;<br>&emsp;&#60;h1&#62;Table of Contents&#60;/h1&#62;<br>&emsp;&#60;ol&#62;<br>&emsp;&emsp;&#60;li&#62;&#60;a href="chap1.html"&#62;Chapter 1&#60;/a&#62;&#60;/li&#62;<br>&emsp;&emsp;&#60;li&#62;&#60;a href="chap2.html"&#62;Chapter 2&#60;/a&#62;&#60;/li&#62;<br>&emsp;&#60;/ol&#62;<br>&#60;/nav&#62;<br></code></p>
                            <ul>
                                <li>Where <code>&#60;h1&#62;</code> is the heading of the contents page;</li>
                                <li><code>&#60;ol&#62;</code> is an ordered list;</li>
                                <li>and <code>"chap1.html"</code>> is the name of the HTML file (which can be called anything, it's good to give it a descriptive name) that you've put into Sigil.</li>
                            </ul>
                            <p>It's useful to seek out live examples, like the Calibre manual. That's where I got the gist of how to lay out the table of contents.</p>
                            <hr>
                            <h3 id="furtherreading">Further Reading:</h3>
                            <ul style="margin-top:0px; margin-bottom:0px;">
                                <li><a href="how-to-create-epubs.html"><cite>How to Create EPUBs</cite></a> a very useful (and pretty comprehensive) guide to using Calibre and LibreOffice to generate EPUBs. This is the best way to make EPUBs from PDFs, the way in the rest of my document is about what you need to know when that doesn't work. Arguably, read <cite>How to Create EPUBs</cite> first.</li>
                                <li><a href="epub-tools-inst.html"><cite>Installing the tools for making EPUBs</cite></a></li>
                                <li><a href="epub-making.html">R. Frobnitz, <cite>Converting PDF Books to EPUB with Calibre and LibreOffice</cite></a></li>
                            </ul>
                            <hr class="lasthr">
                        </section>
                    </article>
                </main>

                <!-- site footer -->
                <nav id="sitefooter" class="bubblebox flexobject" role="contentinfo">
                    <div id="sitefooterlinks">
                        <a class="footerlinks" href="privacy.html" role="link">Privacy Policy</a>
                        <span class="footerbp">&#8226</span>
                        <a class="footerlinks" href="accessibility.html" role="link">Accessibility</a>
                        <span class="footerbp">&#8226</span>
                        <a class="footerlinks" href="about.html" role="link">About</a>
                        <span class="footerbp">&#8226</span>
                        <a class="footerlinks" href="mailto:ces@redfightback.org" role="link">Contact: <code class="inlinecode" style="font-size: 0.8em;">ces@redfightback.org</code></a>
                        <span class="footerbp">&#8226</span>
                        <a class="footerlinks" href="https://redfightback.org" role="link">Red Fightback</a>
                        <span class="footerbp">&#8226</span>
                        <span style="font-size: 0.8rem;">&lt3</span>
                    </div>
                    <div id="copyrightinfo">© Red Fightback 2021 - All works on this website, unless otherwise noted, are licensed under the CC BY-NC-ND 4.0 license.</div>
                </nav>
            </div>

            <!-- contents list far-right side -->
            <nav id="contentslist" class="flexobject" role="navigation">
                <!--  blank space -->
                <div id="contentsheader"></div>
                <!-- contents list -->
                <nav id="bubblebox4contentslist" class="flexobject">
                    <span id="contstitle" class="content">Contents List</span>
                    <a class="contslink" href="#intro" role="link">&#8227 Intro</a>
                    <a class="contslink" href="#epubfileformat" role="link">&#8227 EPUB File Format</a>
                    <a class="contslink" href="#htmlcss" role="link">&#8227 HTML, CSS</a>
                    <a class="contslink" href="#openeditepub" role="link">&#8227 Opening and Editing EPUBs</a>
                    <a class="contslink" href="#ereader" role="link">&#8227 e-Reader</a>
                    <a class="contslink" href="#structure" role="link">&#8227 Structure</a>
                    <a class="contslink" href="#workflow" role="link">&#8227 Workflow</a>
                    <a class="contslink" href="#accessibility" role="link">&#8227 Accessibility</a>
                    <a class="contslink" href="#creativelicense" role="link">&#8227 Creative License</a>
                    <a class="contslink" href="#epubmetadata" role="link">&#8227 EPUB Metadata</a>
                    <a class="contslink" href="#furtherreading" role="link">&#8227 Further Reading</a>
                </nav>
            </nav>
        </div>
    </div>
</body>
</html>
